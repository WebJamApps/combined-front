<template>
  <div class="page-content">
    <div id="topSection">
      <h3 id="eventHeader" style="text-align:center">Events for ${charityName}</h3>
      <div if.bind="events.length === 0"><p style="text-align:center">There are no scheduled events</p></div>
      <div if.bind="events.length !== 0" class="search-table-outer" style="position:relative;overflow-x:auto;">
        <table aurelia-table="data.bind: events; display-data.bind: $displayData; filters.bind: filters" class="bookshelf">
          <thead>
            <tr>
              <th style="padding:8px; text-align:center">Action</th>
              <th style="padding:8px;" aut-sort="key: voName; default: asc">Name</th>
              <th style="padding:8px" >Description</th>
              <th style="padding:8px" >Start Date</th>
              <th style="padding:8px" >Start Time</th>
              <th style="padding:8px">End Date</th>
              <th style="padding:8px">End Time</th>
              <th style="padding:8px"># of Volunteers</th>
              <th style="padding:8px">Talents</th>
              <th style="padding:8px">Work</th>
              <th style="padding:8px">Phone</th>
              <th style="padding:8px">Email</th>
              <th style="padding:8px">Coordinator</th>
            </tr>
          </thead>
          <tbody>
            <tr repeat.for="event of $displayData">
              <td style="padding:8px; text-align:center">
                <button class="button-checkout" raised click.delegate="deleteEvent(event._id)" style="margin-bottom:10px">
                  Delete
                </button>
                <p><a click.delegate="showUpdateEvent(event)">Update</a></p>
              </td>
              <td style="padding:8px" innerhtml.bind="event.voName"></td>
              <td style="padding:8px" innerhtml.bind="event.voDescription"></td>
              <td style="padding:8px" innerhtml.bind="event.voStartDate"></td>
              <td style="padding:8px" innerhtml.bind="event.voStartTime"></td>
              <td style="padding:8px" innerhtml.bind="event.voEndDate"></td>
              <td style="padding:8px" innerhtml.bind="event.voEndTime"></td>
              <td style="padding:8px" innerhtml.bind="event.voNumPeopleNeeded"></td>
              <td style="padding:8px" innerhtml.bind="event.talentHtml"></td>
              <td style="padding:8px" innerhtml.bind="event.workHtml"></td>
              <td style="padding:8px" innerhtml.bind="event.voContactPhone"></td>
              <td style="padding:8px" innerhtml.bind="event.voContactEmail"></td>
              <td style="padding:8px" innerhtml.bind="event.voContactName"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div id="newEventSection" style="margin-left:10px">
      <h4 if.bind="newEvent" class="material-header-h4" style="margin-top:40px"><strong>Schedule A New Event</strong></h4>
      <h4 if.bind="!newEvent" class="material-header-h4" style="margin-top:40px"><strong>Update the ${charityName} Event</strong></h4>
      <form>
<paper-input label="Event name (required)" value.two-way="voOpp.voName & validate:controller2"></paper-input>
<label style="font-size:11pt; margin-top:12px">Describe your event</label>
<textarea value.two-way="voOpp.voDescription" rows="5" cols="33"></textarea>
<paper-input type="number" change.delegate="onlyPositive()" style="margin-top:10px" label="# of Volunteers Needed (required)" value.two-way="voOpp.voNumPeopleNeeded & validate:controller2"></paper-input>
<div class="multiselect" style="width:170px; margin-top:10px">
  <div class="selectBox" click.delegate="showCheckboxes('talents')">
    <select>
      <option style="font-weight:normal">Volunteer's talent(s)</option>
    </select>
    <div class="overSelect"></div>
  </div>
  <iron-dropdown id="talents" horizontal-align="right" vertical-align="top" style="margin-top:25px;">
    <div class="dropdown-content" style="background-color:white;box-sizing: border-box; max-width: 300px; max-height: 362px;overflow:auto;border:1px #dadada solid">
      <label repeat.for="talent of talents" for="${talent}" style="display:block;text-align:left;margin-left:5px;margin-right:5px; width:150px">
        <input type="checkbox" value.bind="talent" id.bind="talent" checked.bind="voOpp.voTalentTypes" change.delegate="talentPicked()"> ${talent}
      </label>
    </div>
  </iron-dropdown>
</div>
<paper-input if.bind="talentOther" value.two-way="voOpp.voTalentTypeOther" label="Other talent" ></paper-input>
<div class="multiselect" style="width:170px; margin-top:25px">
  <div class="selectBox" click.delegate="showCheckboxes('work')">
    <select>
      <option style="font-weight:normal">Volunteer work</option>
    </select>
    <div class="overSelect"></div>
  </div>
  <iron-dropdown id="work" horizontal-align="right" vertical-align="top" style="margin-top:25px;margin-bottom:10px">
    <div class="dropdown-content" style="background-color:white;box-sizing: border-box; max-width: 270px; max-height: 362px;overflow:auto;border:1px #dadada solid">
      <label repeat.for="work of works" for="${work}" style="display:block;text-align:left;margin-left:5px;margin-right:5px; width:160px">
        <input type="checkbox" value.bind="work" id.bind="work" checked.bind="voOpp.voWorkTypes" change.delegate="workPicked()"> ${work}
      </label>
    </div>
  </iron-dropdown>
</div>
<paper-input if.bind="workOther" value.two-way="voOpp.voWorkTypeOther" label="Other work" ></paper-input>
<!-- <label style="margin-top:18px; font-size:12pt">Start Date (required)</label> -->
<p>&nbsp;</p>
<paper-input label="Start Date (required)" id="start-date" value.two-way="voOpp.voStartDate & validate:controller2" type="date" min="${today}" max="${maxStartDate}" change.delegate="selectDate('start-date')"></paper-input>

<!-- <div ref="dpWrapper">
<input id="start-date" md-datepicker="container.bind: dpWrapper; value.two-way: voOpp.voStartDate" type="date" placeholder="Select Date" />
</div> -->
<!-- <label style="margin-top:10px; font-size:14pt">End Date (required)</label> -->
<!-- <div ref="dpWrapper">
<input id="end-date" md-datepicker="container.bind: dpWrapper; value.two-way: voOpp.voEndDate" type="date" placeholder="Select Date" />
</div> -->
<p>&nbsp;</p>
<paper-input label="End Date (required)" id="end-date" value.two-way="voOpp.voEndDate & validate:controller2" type="date" min="${minEndDate}" change.delegate="selectDate('end-date')"></paper-input>
<label style="margin-top:48px; font-size:11pt">Start Time (required)</label>
<!-- <p>Format is <i>HH:MM AM</i></p> -->

<input id="s-time" value.two-way="voOpp.voStartTime & validate:controller2" type="text" click.delegate="showTime('s-time')">
<!-- <button id="id-of-button-to-open-it" raised class="updateButton" click.delegate="showTime()">Time</button>
<p>&nbsp;</p> -->
<!-- <paper-time-picker id="start-time" force-narrow="true" time="8:00" ></paper-time-picker> -->
<!-- <label style="margin-top:10px; font-size:14pt">End Time (required)</label> -->
<label style="margin-top:48px; font-size:11pt">End Time (required)</label>
<input id="e-time" value.two-way="voOpp.voEndTime & validate:controller2" type="text" click.delegate="showTime('e-time')">
<!-- <paper-time-picker id="end-time" force-narrow="true" time="17:00" ></paper-time-picker> -->
<p>&nbsp;</p>
<paper-input style="margin-top:0" label="Name of Coordinator (if not yourself)" value.two-way="voOpp.voContactName"></paper-input>
<paper-input style="margin-top:0" label="Coordinator's Email (if not your email)" value.two-way="voOpp.voContactEmail & validate:controller2"></paper-input>
<paper-input style="margin-top:0" label="Coordinator's Phone (not required)" value.two-way="voOpp.voContactPhone & validate:controller2" type="number"></paper-input>
<div validation-errors.bind="errors" class="form-group" style="max-width: 2in;padding:10px">
  <ul if.bind="controller2.errors">
    <li repeat.for="error of controller2.errors" style="margin-left:-24px; color:red">
      ${error.message}
    </li>
  </ul>
</div>
<button if.bind="newEvent" id="scheduleEvent" class="updateButton" raised click.trigger="scheduleEvent()" style="display:none;margin-bottom:40px">Schedule</button>
<button if.bind="!newEvent" id="updateScheduleEvent" class="updateButton" raised click.trigger="updateEvent()" style="display:none;margin-bottom:40px">Update</button>
<button id="nevermind" class="nevermind" raised click.trigger="showNewEvent()" style="margin-bottom:40px">Nevermind</button>
</form>
</div>
<paper-material id="ohaf-footer" class="footer" elevation="4" style="padding:8px; background-color: #565656"></paper-material>
</div>
</template>
